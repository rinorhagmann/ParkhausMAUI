<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodel="clr-namespace:ParkhausMAUI.ViewModels"
             x:Class="ParkhausMAUI.Views.ActiveParkingPage"
             Title="Aktiver Parkvorgang">

    <VerticalStackLayout Spacing="25" Padding="30" VerticalOptions="Center">

        <VerticalStackLayout IsVisible="{Binding CurrentSession, Converter={StaticResource NullToBoolConverter}}">
            <Label Text="Du parkst aktuell im:" HorizontalOptions="Center" TextColor="Gray"/>
            <Label Text="{Binding CurrentSession.ParkhausName}" 
                   FontSize="24" FontAttributes="Bold" HorizontalOptions="Center" Margin="0,0,0,20"/>

            <Frame BackgroundColor="#F0F0F0" CornerRadius="100" WidthRequest="200" HeightRequest="200" HorizontalOptions="Center">
                <VerticalStackLayout VerticalOptions="Center">
                    <Label Text="{Binding ElapsedTime}" FontSize="32" FontAttributes="Bold" HorizontalOptions="Center"/>
                    <Label Text="Dauer" HorizontalOptions="Center" FontSize="12"/>
                </VerticalStackLayout>
            </Frame>

            <Label Text="{Binding CurrentCosts}" FontSize="40" TextColor="{StaticResource Primary}" 
                   FontAttributes="Bold" HorizontalOptions="Center" Margin="0,20"/>

            <Button Text="Parken beenden" Command="{Binding StopParkingCommand}" 
                    BackgroundColor="Red" CornerRadius="20" HeightRequest="50"/>
        </VerticalStackLayout>

        <VerticalStackLayout IsVisible="{Binding CurrentSession, Converter={StaticResource InverseNullToBoolConverter}}">
            <Label Text="ℹ️" FontSize="60" HorizontalOptions="Center"/>
            <Label Text="Aktuell ist kein Parkvorgang aktiv." HorizontalOptions="Center" Margin="0,20"/>
            <Button Text="Jetzt Parkhaus wählen" Clicked="GoToMainPage" HorizontalOptions="Center"/>
        </VerticalStackLayout>

    </VerticalStackLayout>
</ContentPage>